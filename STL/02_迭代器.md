# 1. 迭代器定义

可以把迭代器理解为“指向容器元素的指针”（实际上不是！），方便对数据元素进行移动、读写、增删。

```cpp
// 这是容器中的元素序列
[1] [2] [3] [4] [5]
 ↑
迭代器指向第一个元素
```

- 迭代器的作用：

	- **统一访问方式**：所有容器都用同样的方法遍历。
	- **算法通用**：STL算法都基于迭代器工作。
	- **安全**：比直接操作指针更安全。
	- **灵活**：可以适配各种数据结构。

---

# 2. 使用方法

1. 创建和移动迭代器

```cpp
vector<int> numbers = {10, 20, 30, 40, 50};

// 创建迭代器
auto it = numbers.begin();  // 指向第一个元素

cout << "第一个元素: " << *it << endl;  // 输出: 10

it++;  // 移动到下一个元素
cout << "第二个元素: " << *it << endl;  // 输出: 20

it = numbers.end();  // 指向最后一个元素的下一个位置
it--;  // 移回最后一个元素
cout << "最后一个元素: " << *it << endl;  // 输出: 50
```

可以发现，迭代器的用法确实和指针非常相似，但它们并不完全相同。迭代器的本质是一种**抽象概念**。虽然迭代器设计成**像指针一样使用**，但底层实现可能不同：

```cpp
// vector的迭代器（底层可能是指针）
vector<int> vec = {1, 2, 3};
auto vec_it = vec.begin();
vec_it += 2;  // 可以直接跳转
cout << *vec_it << endl;  // 输出: 3

// list的迭代器（底层不是简单指针！）
list<int> lst = {1, 2, 3};
auto lst_it = lst.begin();
lst_it++;     // 可以
// lst_it += 2;  // 错误！不能跳转
cout << *lst_it << endl;  // 输出: 2
```

|容器类型|迭代器底层|特点|
|---|---|---|
|`vector`|真正的指针|支持随机访问|
|`list`|结构体，包含节点指针|只支持双向移动|
|`map`|复杂的结构体|按顺序遍历|

2. 遍历所有元素

```cpp
vector<int> scores = {85, 92, 78, 90, 88};

cout << "所有分数: ";
// 方法1：使用迭代器（比较原始）
for (auto it = scores.begin(); it != scores.end(); it++) {
	cout << *it << " ";
}
cout << endl;

cout << "所有分数（现代写法）: ";
// 方法2：范围for循环（底层还是用迭代器）
for (int score : scores) {
	cout << score << " ";
}
```

3. 查找元素

```cpp
vector<string> names = {"Alice", "Bob", "Charlie", "David"};

// 用迭代器查找
auto it = find(names.begin(), names.end(), "Charlie");

if (it != names.end()) {
	cout << "找到了: " << *it << endl;
	cout << "位置: " << it - names.begin() << endl;
} else {
	cout << "没找到" << endl;
}
```

4. 修改元素

```cpp
vector<int> numbers = {1, 2, 3, 4, 5};

// 用迭代器修改元素
for (auto it = numbers.begin(); it != numbers.end(); it++) {
	*it = *it * 2;  // 每个元素乘以2
}

cout << "修改后: ";
for (int num : numbers) {
	cout << num << " ";  // 输出: 2 4 6 8 10
}
```

5. 删除元素

```cpp
vector<int> numbers = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};

// 删除所有偶数
auto new_end = remove_if(numbers.begin(), numbers.end(), 
	[](int n) { return n % 2 == 0; });

numbers.erase(new_end, numbers.end());

cout << "删除偶数后: ";
for (int num : numbers) {
	cout << num << " ";  // 输出: 1 3 5 7 9
}
```

---

# 3. 重要注意事项

1. 不要指向无效位置！

```cpp
vector<int> numbers = {1, 2, 3};
auto it = numbers.begin();

numbers.push_back(4);  // 添加元素，可能导致迭代器失效！

// cout << *it << endl;  // 危险！可能崩溃

// 正确做法：重新获取迭代器
it = numbers.begin();
cout << *it << endl;  // 安全
```

2. **`begin()`** 指向第一个元素。
3. **`end()`** 指向最后一个元素的**下一个位置**（不是最后一个元素！）。
4. **用 `*` 获取值**，用 `++` 移动。


